{"version":3,"file":"typertext.min.js","sources":["typertext.js"],"names":["Typertext","BaseException","message","code","custom","this","prototype","GetCode","GetMessage","GetCustom","GenericResponse","status","responseHeaderGetter","httpResponseCode","responseBody","headers","httpStatus","content","GetContent","GetContentType","GetHeader","name","GetHttpStatus","GetStatus","__extends","d","b","__","constructor","p","hasOwnProperty","Http","HttpException","_super","apply","arguments","HttpMethod","HttpProtocol","HttpRequest","Get","request","callback","RawRequest","Post","postData","method","noop","xhr","XMLHttpRequest","onreadystatechange","readyState","getHeader","getResponseHeader","HttpResponse","responseText","ontimeout","open","ToString","send","setRequestHeader","HttpUrl","UrlEncodeObject","call","HttpResponseStatus","domain","protocol","path","queryString","port","isNaN","DefaultPort","indexOf","FromUrl","location","l","document","createElement","href","hostname","slice","pathname","DecodeQueryString","search","parseInt","substring","UrlDecodeString","EncodeQueryString","query","rs","length","data","temp","encodeURIComponent","returnValue","params","splitString","i","param","key","decodeURIComponent","input","separator","limit","chunks","split","ret","splice","push","join","Json","JsonException","JsonRequest","jsonContentType","jsonType","_this","response","JsonResponse","fromInvalidHttpResponse","fromHttpResponse","parseSuccess","httpResponse","window","parse","e","GetParseStatus"],"mappings":"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","sourcesContent":["var Typertext;\n(function (Typertext) {\n    var BaseException = (function () {\n        function BaseException(message, code, custom) {\n            this.message = message;\n            this.code = code;\n            this.custom = custom;\n        }\n        BaseException.prototype.GetCode = function () {\n            return this.code;\n        };\n\n        BaseException.prototype.GetMessage = function () {\n            return this.message;\n        };\n\n        BaseException.prototype.GetCustom = function () {\n            return this.custom;\n        };\n        return BaseException;\n    })();\n    Typertext.BaseException = BaseException;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    \n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    var GenericResponse = (function () {\n        function GenericResponse(status, responseHeaderGetter, httpResponseCode, responseBody) {\n            this.status = status;\n            this.headers = responseHeaderGetter;\n            this.httpStatus = httpResponseCode;\n            this.content = responseBody;\n        }\n        GenericResponse.prototype.GetContent = function () {\n            return this.content;\n        };\n\n        GenericResponse.prototype.GetContentType = function () {\n            return this.GetHeader(\"Content-Type\");\n        };\n\n        GenericResponse.prototype.GetHeader = function (name) {\n            return this.headers(name);\n        };\n\n        GenericResponse.prototype.GetHttpStatus = function () {\n            return this.httpStatus;\n        };\n\n        GenericResponse.prototype.GetStatus = function () {\n            return this.status;\n        };\n        return GenericResponse;\n    })();\n    Typertext.GenericResponse = GenericResponse;\n})(Typertext || (Typertext = {}));\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar Typertext;\n(function (Typertext) {\n    (function (Http) {\n        var HttpException = (function (_super) {\n            __extends(HttpException, _super);\n            function HttpException() {\n                _super.apply(this, arguments);\n            }\n            return HttpException;\n        })(Typertext.BaseException);\n        Http.HttpException = HttpException;\n    })(Typertext.Http || (Typertext.Http = {}));\n    var Http = Typertext.Http;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Http) {\n        (function (HttpMethod) {\n            HttpMethod[HttpMethod[\"GET\"] = 0] = \"GET\";\n            HttpMethod[HttpMethod[\"POST\"] = 1] = \"POST\";\n        })(Http.HttpMethod || (Http.HttpMethod = {}));\n        var HttpMethod = Http.HttpMethod;\n    })(Typertext.Http || (Typertext.Http = {}));\n    var Http = Typertext.Http;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Http) {\n        (function (HttpProtocol) {\n            HttpProtocol[HttpProtocol[\"http\"] = 0] = \"http\";\n            HttpProtocol[HttpProtocol[\"https\"] = 1] = \"https\";\n        })(Http.HttpProtocol || (Http.HttpProtocol = {}));\n        var HttpProtocol = Http.HttpProtocol;\n    })(Typertext.Http || (Typertext.Http = {}));\n    var Http = Typertext.Http;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Http) {\n        var HttpRequest = (function () {\n            function HttpRequest() {\n            }\n            HttpRequest.prototype.Get = function (request, callback) {\n                this.RawRequest(0 /* GET */, request, {}, callback);\n            };\n\n            HttpRequest.prototype.Post = function (request, postData, callback) {\n                this.RawRequest(1 /* POST */, request, postData, callback);\n            };\n\n            HttpRequest.prototype.RawRequest = function (method, request, postData, callback) {\n                if (typeof postData === \"undefined\") { postData = {}; }\n                if (typeof callback === \"undefined\") { callback = function (c) {\n                }; }\n                var noop = function (i) {\n                    return \"\";\n                };\n\n                var xhr = new XMLHttpRequest();\n\n                xhr.onreadystatechange = function () {\n                    if (xhr.readyState == 4) {\n                        var getHeader = function (name) {\n                            return xhr.getResponseHeader(name);\n                        };\n\n                        if (xhr.status == 200) {\n                            callback(new Typertext.Http.HttpResponse(0 /* success */, getHeader, xhr.status, xhr.responseText));\n                        } else if (xhr.status >= 400 && xhr.status < 500) {\n                            callback(new Typertext.Http.HttpResponse(2 /* clientError */, getHeader, xhr.status, xhr.responseText));\n                        } else if (xhr.status >= 500 && xhr.status < 600) {\n                            callback(new Typertext.Http.HttpResponse(1 /* serverError */, getHeader, xhr.status, xhr.responseText));\n                        } else {\n                            callback(new Typertext.Http.HttpResponse(4 /* unknownError */, getHeader, xhr.status, xhr.responseText));\n                        }\n                    }\n                };\n\n                xhr.ontimeout = function () {\n                    callback(new Typertext.Http.HttpResponse(5 /* timeout */, noop, -1, \"\"));\n                };\n\n                xhr.open(Typertext.Http.HttpMethod[method], request.ToString(), true);\n\n                if (method == 0 /* GET */) {\n                    xhr.send();\n                    return;\n                }\n\n                xhr.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\n\n                xhr.send(Typertext.Http.HttpUrl.UrlEncodeObject(postData));\n            };\n            return HttpRequest;\n        })();\n        Http.HttpRequest = HttpRequest;\n    })(Typertext.Http || (Typertext.Http = {}));\n    var Http = Typertext.Http;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Http) {\n        var HttpResponse = (function (_super) {\n            __extends(HttpResponse, _super);\n            function HttpResponse(status, responseHeaderGetter, httpResponseCode, responseBody) {\n                _super.call(this, status, responseHeaderGetter, httpResponseCode, responseBody);\n            }\n            return HttpResponse;\n        })(Typertext.GenericResponse);\n        Http.HttpResponse = HttpResponse;\n    })(Typertext.Http || (Typertext.Http = {}));\n    var Http = Typertext.Http;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Http) {\n        (function (HttpResponseStatus) {\n            HttpResponseStatus[HttpResponseStatus[\"success\"] = 0] = \"success\";\n            HttpResponseStatus[HttpResponseStatus[\"serverError\"] = 1] = \"serverError\";\n            HttpResponseStatus[HttpResponseStatus[\"clientError\"] = 2] = \"clientError\";\n            HttpResponseStatus[HttpResponseStatus[\"responseError\"] = 3] = \"responseError\";\n            HttpResponseStatus[HttpResponseStatus[\"unknownError\"] = 4] = \"unknownError\";\n            HttpResponseStatus[HttpResponseStatus[\"timeout\"] = 5] = \"timeout\";\n        })(Http.HttpResponseStatus || (Http.HttpResponseStatus = {}));\n        var HttpResponseStatus = Http.HttpResponseStatus;\n    })(Typertext.Http || (Typertext.Http = {}));\n    var Http = Typertext.Http;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Http) {\n        var HttpUrl = (function () {\n            function HttpUrl(domain, protocol, path, queryString, port) {\n                if (typeof protocol === \"undefined\") { protocol = 0 /* http */; }\n                if (typeof path === \"undefined\") { path = \"/\"; }\n                if (typeof queryString === \"undefined\") { queryString = {}; }\n                if (typeof port === \"undefined\") { port = 0; }\n                if (port < 1 || port > 65535 || isNaN(port)) {\n                    port = HttpUrl.DefaultPort(protocol);\n                }\n\n                if (path.indexOf(\"/\") != 0) {\n                    path = \"/\" + path;\n                }\n\n                this.domain = domain;\n                this.protocol = protocol;\n                this.path = path;\n                this.queryString = queryString;\n                this.port = port;\n            }\n            HttpUrl.DefaultPort = function (protocol) {\n                switch (protocol) {\n                    case 0 /* http */:\n                        return 80;\n                    case 1 /* https */:\n                        return 443;\n                    default:\n                        return -1;\n                }\n            };\n\n            HttpUrl.FromUrl = function (location) {\n                var l = document.createElement(\"a\");\n                l.href = location;\n                return new HttpUrl(l.hostname, Typertext.Http.HttpProtocol[l.protocol.slice(0, -1)], l.pathname, HttpUrl.DecodeQueryString(l.search), parseInt(l.port));\n            };\n\n            HttpUrl.DecodeQueryString = function (queryString) {\n                if (queryString.indexOf(\"?\") == 0) {\n                    queryString = queryString.substring(1);\n                }\n\n                return HttpUrl.UrlDecodeString(queryString);\n            };\n\n            HttpUrl.EncodeQueryString = function (query) {\n                var rs = \"?\" + HttpUrl.UrlEncodeObject(query);\n                return ((rs.length == 1) ? \"\" : rs);\n            };\n\n            HttpUrl.UrlEncodeObject = function (data) {\n                var rs = \"\";\n                var temp;\n\n                for (temp in data) {\n                    rs += encodeURIComponent(temp) + \"=\" + encodeURIComponent(data[temp]) + \"&\";\n                }\n\n                return rs.slice(0, -1);\n            };\n\n            HttpUrl.UrlDecodeString = function (queryString) {\n                var returnValue = {}, params = HttpUrl.splitString(queryString, \"&\");\n                for (var i = 0; i < params.length; i++) {\n                    if (params[i] == \"\") {\n                        continue;\n                    }\n\n                    var param = HttpUrl.splitString(params[i], \"=\", 2);\n                    var key = decodeURIComponent(param[0]);\n                    if (param.length == 1) {\n                        returnValue[key] = \"\";\n                        continue;\n                    }\n\n                    returnValue[key] = decodeURIComponent(param[1]);\n                }\n\n                return returnValue;\n            };\n\n            HttpUrl.splitString = function (input, separator, limit) {\n                if (typeof limit === \"undefined\") { limit = -1; }\n                limit++;\n                var chunks = input.split(separator);\n                if (limit > 0 && chunks.length > limit) {\n                    var ret = chunks.splice(0, limit);\n                    ret.push(chunks.join(separator));\n                    return ret;\n                }\n                return chunks;\n            };\n\n            HttpUrl.prototype.ToString = function () {\n                return Typertext.Http.HttpProtocol[this.protocol] + \"://\" + this.domain + ((this.port == HttpUrl.DefaultPort(this.protocol)) ? \"\" : \":\" + this.port) + this.path + HttpUrl.EncodeQueryString(this.queryString);\n            };\n            return HttpUrl;\n        })();\n        Http.HttpUrl = HttpUrl;\n    })(Typertext.Http || (Typertext.Http = {}));\n    var Http = Typertext.Http;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Json) {\n        var JsonException = (function (_super) {\n            __extends(JsonException, _super);\n            function JsonException(message, code) {\n                _super.call(this, message, code, null);\n            }\n            return JsonException;\n        })(Typertext.BaseException);\n        Json.JsonException = JsonException;\n    })(Typertext.Json || (Typertext.Json = {}));\n    var Json = Typertext.Json;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Json) {\n        var HttpRequest = Typertext.Http.HttpRequest;\n\n        var HttpMethod = Typertext.Http.HttpMethod;\n\n        var JsonRequest = (function () {\n            function JsonRequest(jsonContentType) {\n                if (typeof jsonContentType === \"undefined\") { jsonContentType = \"application/json\"; }\n                this.request = new HttpRequest();\n                this.jsonType = jsonContentType;\n            }\n            JsonRequest.prototype.Get = function (request, callback) {\n                this.RawRequest(0 /* GET */, request, {}, callback);\n            };\n\n            JsonRequest.prototype.Post = function (request, postData, callback) {\n                this.RawRequest(1 /* POST */, request, postData, callback);\n            };\n\n            JsonRequest.prototype.RawRequest = function (method, request, postData, callback) {\n                var _this = this;\n                if (typeof postData === \"undefined\") { postData = {}; }\n                if (typeof callback != \"function\") {\n                    this.request.RawRequest(method, request, postData, function () {\n                    });\n                    return;\n                }\n\n                this.request.RawRequest(method, request, postData, function (response) {\n                    if (response.GetContentType() != _this.jsonType) {\n                        callback(Typertext.Json.JsonResponse.fromInvalidHttpResponse(response));\n                        return;\n                    }\n\n                    callback(Typertext.Json.JsonResponse.fromHttpResponse(response));\n                });\n            };\n            return JsonRequest;\n        })();\n        Json.JsonRequest = JsonRequest;\n    })(Typertext.Json || (Typertext.Json = {}));\n    var Json = Typertext.Json;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Json) {\n        var HttpResponseStatus = Typertext.Http.HttpResponseStatus;\n\n        var JsonResponse = (function (_super) {\n            __extends(JsonResponse, _super);\n            function JsonResponse(status, responseHeaderGetter, httpResponseCode, responseBody, parseSuccess) {\n                _super.call(this, status, responseHeaderGetter, httpResponseCode, responseBody);\n                parseSuccess = !!parseSuccess || false;\n                this.parseSuccess = parseSuccess;\n            }\n            JsonResponse.fromHttpResponse = function (httpResponse) {\n                try  {\n                    return new JsonResponse(httpResponse.GetStatus(), httpResponse.GetHeader, httpResponse.GetHttpStatus(), window[\"JSON\"].parse(httpResponse.GetContent()), true);\n                } catch (e) {\n                    return new JsonResponse(httpResponse.GetStatus(), httpResponse.GetHeader, httpResponse.GetHttpStatus(), null);\n                }\n            };\n\n            JsonResponse.fromInvalidHttpResponse = function (httpResponse) {\n                return new JsonResponse(3 /* responseError */, httpResponse.GetHeader, httpResponse.GetHttpStatus());\n            };\n\n            JsonResponse.prototype.GetParseStatus = function () {\n                return this.parseSuccess;\n            };\n            return JsonResponse;\n        })(Typertext.GenericResponse);\n        Json.JsonResponse = JsonResponse;\n    })(Typertext.Json || (Typertext.Json = {}));\n    var Json = Typertext.Json;\n})(Typertext || (Typertext = {}));\n//# sourceMappingURL=typertext.js.map\n"]}