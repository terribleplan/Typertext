{"version":3,"file":"typertext.min.js","sources":["typertext.js"],"names":["Typertext","BaseException","message","code","custom","this","prototype","GetCode","GetMessage","GetCustom","Transport","GenericResponse","status","responseHeaderGetter","httpResponseCode","responseBody","headers","httpStatus","content","GetContent","GetContentType","GetHeader","name","GetHttpStatus","GetStatus","__extends","d","b","__","constructor","p","hasOwnProperty","Http","HttpException","_super","apply","arguments","HttpMethod","HttpProtocol","TransportChooser","HttpRequest","Delete","request","callback","RawRequest","Get","Post","postData","Put","putData","method","transport","transportInstance","Send","HttpResponse","call","HttpResponseStatus","HttpUrl","domain","protocol","path","queryString","port","isNaN","DefaultPort","indexOf","FromUrl","location","l","document","createElement","href","hostname","pathname","search","slice","DecodeQueryString","parseInt","substring","UrlDecodeString","EncodeQueryString","query","rs","UrlEncodeObject","length","data","temp","encodeURIComponent","returnValue","params","splitString","i","param","key","decodeURIComponent","input","separator","limit","chunks","split","ret","splice","push","join","ToString","GetPort","GetDomain","GetProtocol","SameOriginCheck","url","Json","JsonException","JsonRequest","jsonContentType","jsonType","_this","response","JsonResponse","fromInvalidHttpResponse","fromHttpResponse","parseSuccess","httpResponse","window","parse","e","GetParseStatus","ieTestDiv","innerHTML","getElementsByTagName","ieLte9","origin","XHR","XDR","xdr","XDomainRequest","getHeader","toLowerCase","contentType","undefined","ontimeout","onerror","responseText","onload","onprogress","open","send","Destroy","xhr","XMLHttpRequest","onreadystatechange","readyState","getResponseHeader","setRequestHeader"],"mappings":"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","sourcesContent":["var Typertext;\n(function (Typertext) {\n    var BaseException = (function () {\n        function BaseException(message, code, custom) {\n            this.message = message;\n            this.code = code;\n            this.custom = custom;\n        }\n        BaseException.prototype.GetCode = function () {\n            return this.code;\n        };\n\n        BaseException.prototype.GetMessage = function () {\n            return this.message;\n        };\n\n        BaseException.prototype.GetCustom = function () {\n            return this.custom;\n        };\n        return BaseException;\n    })();\n    Typertext.BaseException = BaseException;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Transport) {\n    })(Typertext.Transport || (Typertext.Transport = {}));\n    var Transport = Typertext.Transport;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    \n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    var GenericResponse = (function () {\n        function GenericResponse(status, responseHeaderGetter, httpResponseCode, responseBody) {\n            this.status = status;\n            this.headers = responseHeaderGetter;\n            this.httpStatus = httpResponseCode;\n            this.content = responseBody;\n        }\n        GenericResponse.prototype.GetContent = function () {\n            return this.content;\n        };\n\n        GenericResponse.prototype.GetContentType = function () {\n            return this.GetHeader(\"Content-Type\");\n        };\n\n        GenericResponse.prototype.GetHeader = function (name) {\n            return this.headers(name);\n        };\n\n        GenericResponse.prototype.GetHttpStatus = function () {\n            return this.httpStatus;\n        };\n\n        GenericResponse.prototype.GetStatus = function () {\n            return this.status;\n        };\n        return GenericResponse;\n    })();\n    Typertext.GenericResponse = GenericResponse;\n})(Typertext || (Typertext = {}));\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar Typertext;\n(function (Typertext) {\n    (function (Http) {\n        var HttpException = (function (_super) {\n            __extends(HttpException, _super);\n            function HttpException() {\n                _super.apply(this, arguments);\n            }\n            return HttpException;\n        })(Typertext.BaseException);\n        Http.HttpException = HttpException;\n    })(Typertext.Http || (Typertext.Http = {}));\n    var Http = Typertext.Http;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Http) {\n        (function (HttpMethod) {\n            HttpMethod[HttpMethod[\"DELETE\"] = 0] = \"DELETE\";\n            HttpMethod[HttpMethod[\"GET\"] = 1] = \"GET\";\n            HttpMethod[HttpMethod[\"HEAD\"] = 2] = \"HEAD\";\n            HttpMethod[HttpMethod[\"OPTIONS\"] = 3] = \"OPTIONS\";\n            HttpMethod[HttpMethod[\"POST\"] = 4] = \"POST\";\n            HttpMethod[HttpMethod[\"PUT\"] = 5] = \"PUT\";\n            HttpMethod[HttpMethod[\"TRACE\"] = 6] = \"TRACE\";\n        })(Http.HttpMethod || (Http.HttpMethod = {}));\n        var HttpMethod = Http.HttpMethod;\n    })(Typertext.Http || (Typertext.Http = {}));\n    var Http = Typertext.Http;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Http) {\n        (function (HttpProtocol) {\n            HttpProtocol[HttpProtocol[\"http\"] = 0] = \"http\";\n            HttpProtocol[HttpProtocol[\"https\"] = 1] = \"https\";\n        })(Http.HttpProtocol || (Http.HttpProtocol = {}));\n        var HttpProtocol = Http.HttpProtocol;\n    })(Typertext.Http || (Typertext.Http = {}));\n    var Http = Typertext.Http;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Http) {\n        var TransportChooser = Typertext.Transport.TransportChooser;\n\n        var HttpRequest = (function () {\n            function HttpRequest() {\n            }\n            HttpRequest.prototype.Delete = function (request, callback) {\n                this.RawRequest(5 /* PUT */, request, {}, callback);\n            };\n\n            HttpRequest.prototype.Get = function (request, callback) {\n                this.RawRequest(1 /* GET */, request, {}, callback);\n            };\n\n            HttpRequest.prototype.Post = function (request, postData, callback) {\n                this.RawRequest(4 /* POST */, request, postData, callback);\n            };\n\n            HttpRequest.prototype.Put = function (request, putData, callback) {\n                this.RawRequest(5 /* PUT */, request, putData, callback);\n            };\n\n            HttpRequest.prototype.RawRequest = function (method, request, postData, callback, transport) {\n                if (typeof postData === \"undefined\") { postData = {}; }\n                if (!callback)\n                    callback = function (c) {\n                        return null;\n                    };\n\n                if (!transport)\n                    transport = TransportChooser.Transport(method, request, postData, callback);\n\n                var transportInstance = new transport(method, request, postData, callback);\n                transportInstance.Send();\n            };\n            return HttpRequest;\n        })();\n        Http.HttpRequest = HttpRequest;\n    })(Typertext.Http || (Typertext.Http = {}));\n    var Http = Typertext.Http;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Http) {\n        var HttpResponse = (function (_super) {\n            __extends(HttpResponse, _super);\n            function HttpResponse(status, responseHeaderGetter, httpResponseCode, responseBody) {\n                _super.call(this, status, responseHeaderGetter, httpResponseCode, responseBody);\n            }\n            return HttpResponse;\n        })(Typertext.GenericResponse);\n        Http.HttpResponse = HttpResponse;\n    })(Typertext.Http || (Typertext.Http = {}));\n    var Http = Typertext.Http;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Http) {\n        (function (HttpResponseStatus) {\n            HttpResponseStatus[HttpResponseStatus[\"success\"] = 0] = \"success\";\n            HttpResponseStatus[HttpResponseStatus[\"serverError\"] = 1] = \"serverError\";\n            HttpResponseStatus[HttpResponseStatus[\"clientError\"] = 2] = \"clientError\";\n            HttpResponseStatus[HttpResponseStatus[\"responseError\"] = 3] = \"responseError\";\n            HttpResponseStatus[HttpResponseStatus[\"unknownError\"] = 4] = \"unknownError\";\n            HttpResponseStatus[HttpResponseStatus[\"timeout\"] = 5] = \"timeout\";\n        })(Http.HttpResponseStatus || (Http.HttpResponseStatus = {}));\n        var HttpResponseStatus = Http.HttpResponseStatus;\n    })(Typertext.Http || (Typertext.Http = {}));\n    var Http = Typertext.Http;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Http) {\n        var HttpUrl = (function () {\n            function HttpUrl(domain, protocol, path, queryString, port) {\n                if (typeof protocol === \"undefined\") { protocol = 0 /* http */; }\n                if (typeof path === \"undefined\") { path = \"/\"; }\n                if (typeof queryString === \"undefined\") { queryString = {}; }\n                if (typeof port === \"undefined\") { port = 0; }\n                if (port < 1 || port > 65535 || isNaN(port)) {\n                    port = HttpUrl.DefaultPort(protocol);\n                }\n\n                if (path.indexOf(\"/\") != 0) {\n                    path = \"/\" + path;\n                }\n\n                this.domain = domain;\n                this.protocol = protocol;\n                this.path = path;\n                this.queryString = queryString;\n                this.port = port;\n            }\n            HttpUrl.DefaultPort = function (protocol) {\n                switch (protocol) {\n                    case 0 /* http */:\n                        return 80;\n                    case 1 /* https */:\n                        return 443;\n                    default:\n                        return -1;\n                }\n            };\n\n            HttpUrl.FromUrl = function (location) {\n                var l = document.createElement(\"a\");\n                l.href = location;\n                if (!l.hostname || !l.protocol || !l.pathname || !l.search || !l.port) {\n                    l.href = l.href;\n                }\n                return new HttpUrl(l.hostname, Typertext.Http.HttpProtocol[l.protocol.slice(0, -1)], l.pathname, HttpUrl.DecodeQueryString(l.search), parseInt(l.port));\n            };\n\n            HttpUrl.DecodeQueryString = function (queryString) {\n                if (queryString.indexOf(\"?\") == 0) {\n                    queryString = queryString.substring(1);\n                }\n\n                return HttpUrl.UrlDecodeString(queryString);\n            };\n\n            HttpUrl.EncodeQueryString = function (query) {\n                var rs = \"?\" + HttpUrl.UrlEncodeObject(query);\n                return ((rs.length == 1) ? \"\" : rs);\n            };\n\n            HttpUrl.UrlEncodeObject = function (data) {\n                var rs = \"\";\n                var temp;\n\n                for (temp in data) {\n                    rs += encodeURIComponent(temp) + \"=\" + encodeURIComponent(data[temp]) + \"&\";\n                }\n\n                return rs.slice(0, -1);\n            };\n\n            HttpUrl.UrlDecodeString = function (queryString) {\n                var returnValue = {}, params = HttpUrl.splitString(queryString, \"&\");\n                for (var i = 0; i < params.length; i++) {\n                    if (params[i] == \"\") {\n                        continue;\n                    }\n\n                    var param = HttpUrl.splitString(params[i], \"=\", 2);\n                    var key = decodeURIComponent(param[0]);\n                    if (param.length == 1) {\n                        returnValue[key] = \"\";\n                        continue;\n                    }\n\n                    returnValue[key] = decodeURIComponent(param[1]);\n                }\n\n                return returnValue;\n            };\n\n            HttpUrl.splitString = function (input, separator, limit) {\n                if (typeof limit === \"undefined\") { limit = -1; }\n                limit++;\n                var chunks = input.split(separator);\n                if (limit > 0 && chunks.length > limit) {\n                    var ret = chunks.splice(0, limit);\n                    ret.push(chunks.join(separator));\n                    return ret;\n                }\n                return chunks;\n            };\n\n            HttpUrl.prototype.ToString = function () {\n                return Typertext.Http.HttpProtocol[this.protocol] + \"://\" + this.domain + ((this.port == HttpUrl.DefaultPort(this.protocol)) ? \"\" : \":\" + this.port) + this.path + HttpUrl.EncodeQueryString(this.queryString);\n            };\n\n            HttpUrl.prototype.GetPort = function () {\n                return this.port;\n            };\n\n            HttpUrl.prototype.GetDomain = function () {\n                return this.domain;\n            };\n\n            HttpUrl.prototype.GetProtocol = function () {\n                return this.protocol;\n            };\n\n            HttpUrl.prototype.SameOriginCheck = function (url) {\n                return (this.domain === url.GetDomain() && this.port === url.GetPort() && this.protocol === url.GetProtocol());\n            };\n            return HttpUrl;\n        })();\n        Http.HttpUrl = HttpUrl;\n    })(Typertext.Http || (Typertext.Http = {}));\n    var Http = Typertext.Http;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Json) {\n        var JsonException = (function (_super) {\n            __extends(JsonException, _super);\n            function JsonException(message, code) {\n                _super.call(this, message, code, null);\n            }\n            return JsonException;\n        })(Typertext.BaseException);\n        Json.JsonException = JsonException;\n    })(Typertext.Json || (Typertext.Json = {}));\n    var Json = Typertext.Json;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Json) {\n        var HttpRequest = Typertext.Http.HttpRequest;\n\n        var HttpMethod = Typertext.Http.HttpMethod;\n\n        var JsonRequest = (function () {\n            function JsonRequest(jsonContentType) {\n                if (typeof jsonContentType === \"undefined\") { jsonContentType = \"application/json\"; }\n                this.request = new HttpRequest();\n                this.jsonType = jsonContentType;\n            }\n            JsonRequest.prototype.Delete = function (request, callback) {\n                this.RawRequest(0 /* DELETE */, request, {}, callback);\n            };\n\n            JsonRequest.prototype.Get = function (request, callback) {\n                this.RawRequest(1 /* GET */, request, {}, callback);\n            };\n\n            JsonRequest.prototype.Post = function (request, postData, callback) {\n                this.RawRequest(4 /* POST */, request, postData, callback);\n            };\n\n            JsonRequest.prototype.Put = function (request, putData, callback) {\n                this.RawRequest(5 /* PUT */, request, putData, callback);\n            };\n\n            JsonRequest.prototype.RawRequest = function (method, request, postData, callback, transport) {\n                var _this = this;\n                if (typeof postData === \"undefined\") { postData = {}; }\n                if (typeof callback != \"function\") {\n                    this.request.RawRequest(method, request, postData, function () {\n                    });\n                    return;\n                }\n\n                this.request.RawRequest(method, request, postData, function (response) {\n                    if (response.GetContentType() != _this.jsonType) {\n                        callback(Typertext.Json.JsonResponse.fromInvalidHttpResponse(response));\n                        return;\n                    }\n\n                    callback(Typertext.Json.JsonResponse.fromHttpResponse(response));\n                }, transport);\n            };\n            return JsonRequest;\n        })();\n        Json.JsonRequest = JsonRequest;\n    })(Typertext.Json || (Typertext.Json = {}));\n    var Json = Typertext.Json;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Json) {\n        var HttpResponseStatus = Typertext.Http.HttpResponseStatus;\n\n        var JsonResponse = (function (_super) {\n            __extends(JsonResponse, _super);\n            function JsonResponse(status, responseHeaderGetter, httpResponseCode, responseBody, parseSuccess) {\n                _super.call(this, status, responseHeaderGetter, httpResponseCode, responseBody);\n                parseSuccess = !!parseSuccess || false;\n                this.parseSuccess = parseSuccess;\n            }\n            JsonResponse.fromHttpResponse = function (httpResponse) {\n                try  {\n                    return new JsonResponse(httpResponse.GetStatus(), httpResponse.GetHeader, httpResponse.GetHttpStatus(), window[\"JSON\"].parse(httpResponse.GetContent()), true);\n                } catch (e) {\n                    return new JsonResponse(httpResponse.GetStatus(), httpResponse.GetHeader, httpResponse.GetHttpStatus(), null);\n                }\n            };\n\n            JsonResponse.fromInvalidHttpResponse = function (httpResponse) {\n                return new JsonResponse(3 /* responseError */, httpResponse.GetHeader, httpResponse.GetHttpStatus());\n            };\n\n            JsonResponse.prototype.GetParseStatus = function () {\n                return this.parseSuccess;\n            };\n            return JsonResponse;\n        })(Typertext.GenericResponse);\n        Json.JsonResponse = JsonResponse;\n    })(Typertext.Json || (Typertext.Json = {}));\n    var Json = Typertext.Json;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Transport) {\n        var HttpUrl = Typertext.Http.HttpUrl;\n\n        var TransportChooser = (function () {\n            function TransportChooser() {\n            }\n            TransportChooser.Transport = function (method, request, postData, callback) {\n                var ieTestDiv = document.createElement(\"div\");\n                ieTestDiv.innerHTML = \"<!--[if lte IE 7]><i></i><![endif]-->\";\n\n                if (ieTestDiv.getElementsByTagName(\"i\").length === 1) {\n                    throw {};\n                }\n\n                ieTestDiv.innerHTML = \"<!--[if lte IE 9]><i></i><![endif]-->\";\n                var ieLte9 = (ieTestDiv.getElementsByTagName(\"i\").length === 1);\n                var origin = HttpUrl.FromUrl(window.location.href);\n\n                if (origin.SameOriginCheck(origin) || !ieLte9) {\n                    return Typertext.Transport.XHR;\n                }\n\n                if (origin.GetProtocol() === request.GetProtocol()) {\n                    return Typertext.Transport.XDR;\n                }\n\n                throw {};\n            };\n            return TransportChooser;\n        })();\n        Transport.TransportChooser = TransportChooser;\n    })(Typertext.Transport || (Typertext.Transport = {}));\n    var Transport = Typertext.Transport;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Transport) {\n        var HttpMethod = Typertext.Http.HttpMethod;\n        var HttpUrl = Typertext.Http.HttpUrl;\n\n        var HttpResponseStatus = Typertext.Http.HttpResponseStatus;\n        var HttpResponse = Typertext.Http.HttpResponse;\n\n        var XDR = (function () {\n            function XDR(method, request, postData, callback) {\n                if (typeof postData === \"undefined\") { postData = {}; }\n                if (typeof callback === \"undefined\") { callback = function (c) {\n                    return null;\n                }; }\n                this.postData = postData;\n                this.method = method;\n                this.request = request;\n                this.callback = callback;\n\n                this.xdr = new XDomainRequest();\n            }\n            XDR.prototype.Send = function () {\n                var _this = this;\n                var getHeader = function (name) {\n                    if (name.toLowerCase() === \"content-type\") {\n                        return _this.xdr.contentType;\n                    }\n                    return undefined;\n                };\n\n                this.xdr.ontimeout = function () {\n                    _this.callback(new HttpResponse(5 /* timeout */, function (i) {\n                        return \"\";\n                    }, -1, \"\"));\n                };\n\n                this.xdr.onerror = function () {\n                    _this.callback(new HttpResponse(4 /* unknownError */, getHeader, -1, _this.xdr.responseText));\n                };\n\n                this.xdr.onload = function () {\n                    _this.callback(new HttpResponse(0 /* success */, getHeader, 200, _this.xdr.responseText));\n                };\n\n                this.xdr.onprogress = function () {\n                    return null;\n                };\n\n                this.xdr.open(HttpMethod[this.method], this.request.ToString());\n\n                if (this.method == 1 /* GET */) {\n                    this.xdr.send();\n                    return;\n                }\n\n                this.xdr.send(HttpUrl.UrlEncodeObject(this.postData));\n            };\n\n            XDR.prototype.Destroy = function () {\n                this.xdr.ontimeout = this.xdr.onerror = this.xdr.onload = this.xdr.onprogress = null;\n                this.xdr = null;\n            };\n            return XDR;\n        })();\n        Transport.XDR = XDR;\n    })(Typertext.Transport || (Typertext.Transport = {}));\n    var Transport = Typertext.Transport;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Transport) {\n        var HttpMethod = Typertext.Http.HttpMethod;\n        var HttpUrl = Typertext.Http.HttpUrl;\n\n        var HttpResponseStatus = Typertext.Http.HttpResponseStatus;\n        var HttpResponse = Typertext.Http.HttpResponse;\n\n        var XHR = (function () {\n            function XHR(method, request, postData, callback) {\n                if (typeof postData === \"undefined\") { postData = {}; }\n                if (typeof callback === \"undefined\") { callback = function (c) {\n                    return null;\n                }; }\n                var _this = this;\n                this.postData = postData;\n                this.method = method;\n                this.request = request;\n                this.callback = callback;\n\n                this.xhr = new XMLHttpRequest();\n\n                this.xhr.onreadystatechange = function () {\n                    if (_this.xhr.readyState == 4) {\n                        var getHeader = function (name) {\n                            return _this.xhr.getResponseHeader(name);\n                        };\n\n                        if (_this.xhr.status == 200) {\n                            _this.callback(new HttpResponse(0 /* success */, getHeader, _this.xhr.status, _this.xhr.responseText));\n                        } else if (_this.xhr.status >= 400 && _this.xhr.status < 500) {\n                            _this.callback(new HttpResponse(2 /* clientError */, getHeader, _this.xhr.status, _this.xhr.responseText));\n                        } else if (_this.xhr.status >= 500 && _this.xhr.status < 600) {\n                            _this.callback(new HttpResponse(1 /* serverError */, getHeader, _this.xhr.status, _this.xhr.responseText));\n                        } else {\n                            _this.callback(new HttpResponse(4 /* unknownError */, getHeader, _this.xhr.status, _this.xhr.responseText));\n                        }\n                    }\n                };\n\n                this.xhr.ontimeout = function () {\n                    _this.callback(new HttpResponse(5 /* timeout */, function (i) {\n                        return \"\";\n                    }, -1, \"\"));\n                };\n            }\n            XHR.prototype.Send = function () {\n                this.xhr.open(HttpMethod[this.method], this.request.ToString(), true);\n\n                if (this.method == 1 /* GET */) {\n                    this.xhr.send();\n                    return;\n                }\n\n                this.xhr.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\n\n                this.xhr.send(HttpUrl.UrlEncodeObject(this.postData));\n            };\n\n            XHR.prototype.Destroy = function () {\n                this.xhr.onreadystatechange = this.xhr.ontimeout = null;\n                this.xhr = null;\n            };\n            return XHR;\n        })();\n        Transport.XHR = XHR;\n    })(Typertext.Transport || (Typertext.Transport = {}));\n    var Transport = Typertext.Transport;\n})(Typertext || (Typertext = {}));\n//# sourceMappingURL=typertext.js.map\n"]}