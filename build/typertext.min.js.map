{"version":3,"file":"typertext.min.js","sources":["typertext.js"],"names":["Typertext","BaseException","message","code","custom","this","prototype","GetCode","GetMessage","GetCustom","GenericResponse","status","responseHeaderGetter","httpResponseCode","responseBody","headers","httpStatus","content","GetContent","GetContentType","GetHeader","name","GetHttpStatus","GetStatus","Http","HttpMethod","HttpUrl","domain","protocol","path","queryString","port","isNaN","DefaultPort","indexOf","FromUrl","location","l","document","createElement","href","hostname","pathname","search","HttpProtocol","slice","DecodeQueryString","parseInt","substring","UrlDecodeString","EncodeQueryString","query","rs","UrlEncodeObject","length","data","temp","cur","Array","i","encodeURIComponent","returnValue","params","splitString","param","key","decodeURIComponent","input","separator","limit","chunks","split","ret","splice","push","join","ToString","GetPort","GetDomain","GetProtocol","SameOriginCheck","url","Transport","__extends","d","b","__","constructor","p","hasOwnProperty","HttpException","_super","apply","arguments","TransportChooser","method","request","ieTestDiv","innerHTML","getElementsByTagName","ieLte9","origin","window","XHR","XDR","HttpRequest","Delete","callback","RawRequest","Get","Post","postData","Put","putData","transport","transportInstance","Send","HttpResponse","call","HttpResponseStatus","Json","JsonException","JsonRequest","jsonContentType","jsonType","_this","response","JsonResponse","fromInvalidHttpResponse","fromHttpResponse","parseSuccess","httpResponse","parse","e","GetParseStatus","xdr","XDomainRequest","getHeader","toLowerCase","contentType","undefined","ontimeout","onerror","responseText","onload","onprogress","open","send","Destroy","xhr","XMLHttpRequest","onreadystatechange","readyState","getResponseHeader","setRequestHeader"],"mappings":"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","sourcesContent":["var Typertext;\n(function (Typertext) {\n    var BaseException = (function () {\n        function BaseException(message, code, custom) {\n            this.message = message;\n            this.code = code;\n            this.custom = custom;\n        }\n        BaseException.prototype.GetCode = function () {\n            return this.code;\n        };\n\n        BaseException.prototype.GetMessage = function () {\n            return this.message;\n        };\n\n        BaseException.prototype.GetCustom = function () {\n            return this.custom;\n        };\n        return BaseException;\n    })();\n    Typertext.BaseException = BaseException;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    var GenericResponse = (function () {\n        function GenericResponse(status, responseHeaderGetter, httpResponseCode, responseBody) {\n            this.status = status;\n            this.headers = responseHeaderGetter;\n            this.httpStatus = httpResponseCode;\n            this.content = responseBody;\n        }\n        GenericResponse.prototype.GetContent = function () {\n            return this.content;\n        };\n\n        GenericResponse.prototype.GetContentType = function () {\n            return this.GetHeader(\"Content-Type\");\n        };\n\n        GenericResponse.prototype.GetHeader = function (name) {\n            return this.headers(name);\n        };\n\n        GenericResponse.prototype.GetHttpStatus = function () {\n            return this.httpStatus;\n        };\n\n        GenericResponse.prototype.GetStatus = function () {\n            return this.status;\n        };\n        return GenericResponse;\n    })();\n    Typertext.GenericResponse = GenericResponse;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Http) {\n        (function (HttpMethod) {\n            HttpMethod[HttpMethod[\"DELETE\"] = 0] = \"DELETE\";\n            HttpMethod[HttpMethod[\"GET\"] = 1] = \"GET\";\n            HttpMethod[HttpMethod[\"HEAD\"] = 2] = \"HEAD\";\n            HttpMethod[HttpMethod[\"OPTIONS\"] = 3] = \"OPTIONS\";\n            HttpMethod[HttpMethod[\"POST\"] = 4] = \"POST\";\n            HttpMethod[HttpMethod[\"PUT\"] = 5] = \"PUT\";\n            HttpMethod[HttpMethod[\"TRACE\"] = 6] = \"TRACE\";\n        })(Http.HttpMethod || (Http.HttpMethod = {}));\n        var HttpMethod = Http.HttpMethod;\n    })(Typertext.Http || (Typertext.Http = {}));\n    var Http = Typertext.Http;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Http) {\n        var HttpUrl = (function () {\n            function HttpUrl(domain, protocol, path, queryString, port) {\n                if (typeof protocol === \"undefined\") { protocol = 0 /* http */; }\n                if (typeof path === \"undefined\") { path = \"/\"; }\n                if (typeof queryString === \"undefined\") { queryString = {}; }\n                if (typeof port === \"undefined\") { port = 0; }\n                if (port < 1 || port > 65535 || isNaN(port)) {\n                    port = HttpUrl.DefaultPort(protocol);\n                }\n\n                if (path.indexOf(\"/\") != 0) {\n                    path = \"/\" + path;\n                }\n\n                this.domain = domain;\n                this.protocol = protocol;\n                this.path = path;\n                this.queryString = queryString;\n                this.port = port;\n            }\n            HttpUrl.DefaultPort = function (protocol) {\n                switch (protocol) {\n                    case 0 /* http */:\n                        return 80;\n                    case 1 /* https */:\n                        return 443;\n                    default:\n                        return -1;\n                }\n            };\n\n            HttpUrl.FromUrl = function (location) {\n                var l = document.createElement(\"a\");\n                l.href = location;\n                if (!l.hostname || !l.protocol || !l.pathname || !l.search || !l.port) {\n                    l.href = l.href;\n                }\n                return new HttpUrl(l.hostname, Typertext.Http.HttpProtocol[l.protocol.slice(0, -1)], l.pathname, HttpUrl.DecodeQueryString(l.search), parseInt(l.port));\n            };\n\n            HttpUrl.DecodeQueryString = function (queryString) {\n                if (queryString.indexOf(\"?\") == 0) {\n                    queryString = queryString.substring(1);\n                }\n\n                return HttpUrl.UrlDecodeString(queryString);\n            };\n\n            HttpUrl.EncodeQueryString = function (query) {\n                var rs = \"?\" + HttpUrl.UrlEncodeObject(query);\n                return ((rs.length == 1) ? \"\" : rs);\n            };\n\n            HttpUrl.UrlEncodeObject = function (data) {\n                var rs = \"\";\n                var temp;\n\n                for (temp in data) {\n                    var cur = data[temp];\n\n                    if (typeof cur !== \"object\" && typeof cur !== \"function\") {\n                        rs += encodeURIComponent(temp) + \"=\" + encodeURIComponent(cur) + \"&\";\n                        continue;\n                    }\n\n                    if (cur instanceof Array) {\n                        for (var i = 0; i < cur.length; i++) {\n                            if (typeof cur[i] === \"object\" && typeof cur[i] !== \"function\") {\n                                continue;\n                            }\n\n                            rs += encodeURIComponent(temp) + \"=\" + encodeURIComponent(cur[i]) + \"&\";\n                        }\n                    }\n                }\n\n                return rs.slice(0, -1);\n            };\n\n            HttpUrl.UrlDecodeString = function (queryString) {\n                var returnValue = {}, params = HttpUrl.splitString(queryString, \"&\");\n                for (var i = 0; i < params.length; i++) {\n                    if (params[i] == \"\") {\n                        continue;\n                    }\n\n                    var param = HttpUrl.splitString(params[i], \"=\", 2);\n                    var key = decodeURIComponent(param[0]);\n                    if (param.length == 1) {\n                        returnValue[key] = \"\";\n                        continue;\n                    }\n\n                    returnValue[key] = decodeURIComponent(param[1]);\n                }\n\n                return returnValue;\n            };\n\n            HttpUrl.splitString = function (input, separator, limit) {\n                if (typeof limit === \"undefined\") { limit = -1; }\n                limit++;\n                var chunks = input.split(separator);\n                if (limit > 0 && chunks.length > limit) {\n                    var ret = chunks.splice(0, limit);\n                    ret.push(chunks.join(separator));\n                    return ret;\n                }\n                return chunks;\n            };\n\n            HttpUrl.prototype.ToString = function () {\n                return Typertext.Http.HttpProtocol[this.protocol] + \"://\" + this.domain + ((this.port == HttpUrl.DefaultPort(this.protocol)) ? \"\" : \":\" + this.port) + this.path + HttpUrl.EncodeQueryString(this.queryString);\n            };\n\n            HttpUrl.prototype.GetPort = function () {\n                return this.port;\n            };\n\n            HttpUrl.prototype.GetDomain = function () {\n                return this.domain;\n            };\n\n            HttpUrl.prototype.GetProtocol = function () {\n                return this.protocol;\n            };\n\n            HttpUrl.prototype.SameOriginCheck = function (url) {\n                return (this.domain === url.GetDomain() && this.port === url.GetPort() && this.protocol === url.GetProtocol());\n            };\n            return HttpUrl;\n        })();\n        Http.HttpUrl = HttpUrl;\n    })(Typertext.Http || (Typertext.Http = {}));\n    var Http = Typertext.Http;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Transport) {\n    })(Typertext.Transport || (Typertext.Transport = {}));\n    var Transport = Typertext.Transport;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    \n})(Typertext || (Typertext = {}));\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar Typertext;\n(function (Typertext) {\n    (function (Http) {\n        var HttpException = (function (_super) {\n            __extends(HttpException, _super);\n            function HttpException() {\n                _super.apply(this, arguments);\n            }\n            return HttpException;\n        })(Typertext.BaseException);\n        Http.HttpException = HttpException;\n    })(Typertext.Http || (Typertext.Http = {}));\n    var Http = Typertext.Http;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Http) {\n        (function (HttpProtocol) {\n            HttpProtocol[HttpProtocol[\"http\"] = 0] = \"http\";\n            HttpProtocol[HttpProtocol[\"https\"] = 1] = \"https\";\n        })(Http.HttpProtocol || (Http.HttpProtocol = {}));\n        var HttpProtocol = Http.HttpProtocol;\n    })(Typertext.Http || (Typertext.Http = {}));\n    var Http = Typertext.Http;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Transport) {\n        var HttpUrl = Typertext.Http.HttpUrl;\n\n        var TransportChooser = (function () {\n            function TransportChooser() {\n            }\n            TransportChooser.Transport = function (method, request, postData, callback) {\n                var ieTestDiv = document.createElement(\"div\");\n                ieTestDiv.innerHTML = \"<!--[if lte IE 7]><i></i><![endif]-->\";\n\n                if (ieTestDiv.getElementsByTagName(\"i\").length === 1) {\n                    throw {};\n                }\n\n                ieTestDiv.innerHTML = \"<!--[if lte IE 9]><i></i><![endif]-->\";\n                var ieLte9 = (ieTestDiv.getElementsByTagName(\"i\").length === 1);\n                var origin = HttpUrl.FromUrl(window.location.href);\n\n                if (origin.SameOriginCheck(origin) || !ieLte9) {\n                    return Typertext.Transport.XHR;\n                }\n\n                if (origin.GetProtocol() === request.GetProtocol()) {\n                    return Typertext.Transport.XDR;\n                }\n\n                throw {};\n            };\n            return TransportChooser;\n        })();\n        Transport.TransportChooser = TransportChooser;\n    })(Typertext.Transport || (Typertext.Transport = {}));\n    var Transport = Typertext.Transport;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Http) {\n        var TransportChooser = Typertext.Transport.TransportChooser;\n\n        var HttpRequest = (function () {\n            function HttpRequest() {\n            }\n            HttpRequest.prototype.Delete = function (request, callback) {\n                this.RawRequest(5 /* PUT */, request, {}, callback);\n            };\n\n            HttpRequest.prototype.Get = function (request, callback) {\n                this.RawRequest(1 /* GET */, request, {}, callback);\n            };\n\n            HttpRequest.prototype.Post = function (request, postData, callback) {\n                this.RawRequest(4 /* POST */, request, postData, callback);\n            };\n\n            HttpRequest.prototype.Put = function (request, putData, callback) {\n                this.RawRequest(5 /* PUT */, request, putData, callback);\n            };\n\n            HttpRequest.prototype.RawRequest = function (method, request, postData, callback, transport) {\n                if (typeof postData === \"undefined\") { postData = {}; }\n                if (!callback)\n                    callback = function (c) {\n                        return null;\n                    };\n\n                if (!transport)\n                    transport = TransportChooser.Transport(method, request, postData, callback);\n\n                var transportInstance = new transport(method, request, postData, callback);\n                transportInstance.Send();\n            };\n            return HttpRequest;\n        })();\n        Http.HttpRequest = HttpRequest;\n    })(Typertext.Http || (Typertext.Http = {}));\n    var Http = Typertext.Http;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Http) {\n        var HttpResponse = (function (_super) {\n            __extends(HttpResponse, _super);\n            function HttpResponse(status, responseHeaderGetter, httpResponseCode, responseBody) {\n                _super.call(this, status, responseHeaderGetter, httpResponseCode, responseBody);\n            }\n            return HttpResponse;\n        })(Typertext.GenericResponse);\n        Http.HttpResponse = HttpResponse;\n    })(Typertext.Http || (Typertext.Http = {}));\n    var Http = Typertext.Http;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Http) {\n        (function (HttpResponseStatus) {\n            HttpResponseStatus[HttpResponseStatus[\"success\"] = 0] = \"success\";\n            HttpResponseStatus[HttpResponseStatus[\"serverError\"] = 1] = \"serverError\";\n            HttpResponseStatus[HttpResponseStatus[\"clientError\"] = 2] = \"clientError\";\n            HttpResponseStatus[HttpResponseStatus[\"responseError\"] = 3] = \"responseError\";\n            HttpResponseStatus[HttpResponseStatus[\"unknownError\"] = 4] = \"unknownError\";\n            HttpResponseStatus[HttpResponseStatus[\"timeout\"] = 5] = \"timeout\";\n        })(Http.HttpResponseStatus || (Http.HttpResponseStatus = {}));\n        var HttpResponseStatus = Http.HttpResponseStatus;\n    })(Typertext.Http || (Typertext.Http = {}));\n    var Http = Typertext.Http;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Json) {\n        var JsonException = (function (_super) {\n            __extends(JsonException, _super);\n            function JsonException(message, code) {\n                _super.call(this, message, code, null);\n            }\n            return JsonException;\n        })(Typertext.BaseException);\n        Json.JsonException = JsonException;\n    })(Typertext.Json || (Typertext.Json = {}));\n    var Json = Typertext.Json;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Json) {\n        var HttpRequest = Typertext.Http.HttpRequest;\n\n        var HttpMethod = Typertext.Http.HttpMethod;\n\n        var JsonRequest = (function () {\n            function JsonRequest(jsonContentType) {\n                if (typeof jsonContentType === \"undefined\") { jsonContentType = \"application/json\"; }\n                this.request = new HttpRequest();\n                this.jsonType = jsonContentType;\n            }\n            JsonRequest.prototype.Delete = function (request, callback) {\n                this.RawRequest(0 /* DELETE */, request, {}, callback);\n            };\n\n            JsonRequest.prototype.Get = function (request, callback) {\n                this.RawRequest(1 /* GET */, request, {}, callback);\n            };\n\n            JsonRequest.prototype.Post = function (request, postData, callback) {\n                this.RawRequest(4 /* POST */, request, postData, callback);\n            };\n\n            JsonRequest.prototype.Put = function (request, putData, callback) {\n                this.RawRequest(5 /* PUT */, request, putData, callback);\n            };\n\n            JsonRequest.prototype.RawRequest = function (method, request, postData, callback, transport) {\n                var _this = this;\n                if (typeof postData === \"undefined\") { postData = {}; }\n                if (typeof callback != \"function\") {\n                    this.request.RawRequest(method, request, postData, function () {\n                    });\n                    return;\n                }\n\n                this.request.RawRequest(method, request, postData, function (response) {\n                    if (response.GetContentType() != _this.jsonType) {\n                        callback(Typertext.Json.JsonResponse.fromInvalidHttpResponse(response));\n                        return;\n                    }\n\n                    callback(Typertext.Json.JsonResponse.fromHttpResponse(response));\n                }, transport);\n            };\n            return JsonRequest;\n        })();\n        Json.JsonRequest = JsonRequest;\n    })(Typertext.Json || (Typertext.Json = {}));\n    var Json = Typertext.Json;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Json) {\n        var HttpResponseStatus = Typertext.Http.HttpResponseStatus;\n\n        var JsonResponse = (function (_super) {\n            __extends(JsonResponse, _super);\n            function JsonResponse(status, responseHeaderGetter, httpResponseCode, responseBody, parseSuccess) {\n                _super.call(this, status, responseHeaderGetter, httpResponseCode, responseBody);\n                parseSuccess = !!parseSuccess || false;\n                this.parseSuccess = parseSuccess;\n            }\n            JsonResponse.fromHttpResponse = function (httpResponse) {\n                try  {\n                    return new JsonResponse(httpResponse.GetStatus(), httpResponse.GetHeader, httpResponse.GetHttpStatus(), window[\"JSON\"].parse(httpResponse.GetContent()), true);\n                } catch (e) {\n                    return new JsonResponse(httpResponse.GetStatus(), httpResponse.GetHeader, httpResponse.GetHttpStatus(), null);\n                }\n            };\n\n            JsonResponse.fromInvalidHttpResponse = function (httpResponse) {\n                return new JsonResponse(3 /* responseError */, httpResponse.GetHeader, httpResponse.GetHttpStatus());\n            };\n\n            JsonResponse.prototype.GetParseStatus = function () {\n                return this.parseSuccess;\n            };\n            return JsonResponse;\n        })(Typertext.GenericResponse);\n        Json.JsonResponse = JsonResponse;\n    })(Typertext.Json || (Typertext.Json = {}));\n    var Json = Typertext.Json;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Transport) {\n        var HttpMethod = Typertext.Http.HttpMethod;\n        var HttpUrl = Typertext.Http.HttpUrl;\n\n        var HttpResponseStatus = Typertext.Http.HttpResponseStatus;\n        var HttpResponse = Typertext.Http.HttpResponse;\n\n        var XDR = (function () {\n            function XDR(method, request, postData, callback) {\n                if (typeof postData === \"undefined\") { postData = {}; }\n                if (typeof callback === \"undefined\") { callback = function (c) {\n                    return null;\n                }; }\n                this.postData = postData;\n                this.method = method;\n                this.request = request;\n                this.callback = callback;\n\n                this.xdr = new XDomainRequest();\n            }\n            XDR.prototype.Send = function () {\n                var _this = this;\n                var getHeader = function (name) {\n                    if (name.toLowerCase() === \"content-type\") {\n                        return _this.xdr.contentType;\n                    }\n                    return undefined;\n                };\n\n                this.xdr.ontimeout = function () {\n                    _this.callback(new HttpResponse(5 /* timeout */, function (i) {\n                        return \"\";\n                    }, -1, \"\"));\n                };\n\n                this.xdr.onerror = function () {\n                    _this.callback(new HttpResponse(4 /* unknownError */, getHeader, -1, _this.xdr.responseText));\n                };\n\n                this.xdr.onload = function () {\n                    _this.callback(new HttpResponse(0 /* success */, getHeader, 200, _this.xdr.responseText));\n                };\n\n                this.xdr.onprogress = function () {\n                    return null;\n                };\n\n                this.xdr.open(HttpMethod[this.method], this.request.ToString());\n\n                if (this.method == 1 /* GET */) {\n                    this.xdr.send();\n                    return;\n                }\n\n                this.xdr.send(HttpUrl.UrlEncodeObject(this.postData));\n            };\n\n            XDR.prototype.Destroy = function () {\n                this.xdr.ontimeout = this.xdr.onerror = this.xdr.onload = this.xdr.onprogress = null;\n                this.xdr = null;\n            };\n            return XDR;\n        })();\n        Transport.XDR = XDR;\n    })(Typertext.Transport || (Typertext.Transport = {}));\n    var Transport = Typertext.Transport;\n})(Typertext || (Typertext = {}));\nvar Typertext;\n(function (Typertext) {\n    (function (Transport) {\n        var HttpMethod = Typertext.Http.HttpMethod;\n        var HttpUrl = Typertext.Http.HttpUrl;\n\n        var HttpResponseStatus = Typertext.Http.HttpResponseStatus;\n        var HttpResponse = Typertext.Http.HttpResponse;\n\n        var XHR = (function () {\n            function XHR(method, request, postData, callback) {\n                if (typeof postData === \"undefined\") { postData = {}; }\n                if (typeof callback === \"undefined\") { callback = function (c) {\n                    return null;\n                }; }\n                var _this = this;\n                this.postData = postData;\n                this.method = method;\n                this.request = request;\n                this.callback = callback;\n\n                this.xhr = new XMLHttpRequest();\n\n                this.xhr.onreadystatechange = function () {\n                    if (_this.xhr.readyState == 4) {\n                        var getHeader = function (name) {\n                            return _this.xhr.getResponseHeader(name);\n                        };\n\n                        if (_this.xhr.status == 200) {\n                            _this.callback(new HttpResponse(0 /* success */, getHeader, _this.xhr.status, _this.xhr.responseText));\n                        } else if (_this.xhr.status >= 400 && _this.xhr.status < 500) {\n                            _this.callback(new HttpResponse(2 /* clientError */, getHeader, _this.xhr.status, _this.xhr.responseText));\n                        } else if (_this.xhr.status >= 500 && _this.xhr.status < 600) {\n                            _this.callback(new HttpResponse(1 /* serverError */, getHeader, _this.xhr.status, _this.xhr.responseText));\n                        } else {\n                            _this.callback(new HttpResponse(4 /* unknownError */, getHeader, _this.xhr.status, _this.xhr.responseText));\n                        }\n                    }\n                };\n\n                this.xhr.ontimeout = function () {\n                    _this.callback(new HttpResponse(5 /* timeout */, function (i) {\n                        return \"\";\n                    }, -1, \"\"));\n                };\n            }\n            XHR.prototype.Send = function () {\n                this.xhr.open(HttpMethod[this.method], this.request.ToString(), true);\n\n                if (this.method == 1 /* GET */) {\n                    this.xhr.send();\n                    return;\n                }\n\n                this.xhr.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\n\n                this.xhr.send(HttpUrl.UrlEncodeObject(this.postData));\n            };\n\n            XHR.prototype.Destroy = function () {\n                this.xhr.onreadystatechange = this.xhr.ontimeout = null;\n                this.xhr = null;\n            };\n            return XHR;\n        })();\n        Transport.XHR = XHR;\n    })(Typertext.Transport || (Typertext.Transport = {}));\n    var Transport = Typertext.Transport;\n})(Typertext || (Typertext = {}));\n//# sourceMappingURL=typertext.js.map\n"]}